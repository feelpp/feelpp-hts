{
    "Name": "Magnetodynamic saddle-point 3d",
    "ShortName": "mqs-3d",
    "Models":
    {
        "cfpdes":{
            "equations":["magnetic","electric","constraint"]
        },
        "magnetic":{
            "common":{
                "setup":{
                    "unknown":
                    {
                        "basis":"Ned1h0",
                        "name":"A",
                        "symbol":"A"
                    }
                }
            },
            "models":[{
                "name":"magnetic_Conductor",
                "materials":"Conductor",
                "setup":{
                    "coefficients":{
                        "zeta":"1/mu:mu",
                        "a":"epsilon:epsilon",
                        "d":"sigma:sigma",
                        "f":"{-constraint_grad_p_0-sigma*electric_grad_V_0,-constraint_grad_p_1-sigma*electric_grad_V_1,-constraint_grad_p_2-sigma*electric_grad_V_2}:sigma:electric_grad_V_0:electric_grad_V_1:electric_grad_V_2:constraint_grad_p_0:constraint_grad_p_1:constraint_grad_p_2"
                    }
                }
            },{
                "name":"magnetic_Air",
                "materials":"Air",
                "setup":{
                    "coefficients":{
                        "zeta":"1/mu:mu",
                        "a":"epsilon:epsilon",
                        "f":"{-constraint_grad_p_0,-constraint_grad_p_1,-constraint_grad_p_2}:constraint_grad_p_0:constraint_grad_p_1:constraint_grad_p_2"
                    }
                }
                
            }]
        },
        "electric":{
            "common":{
                "setup":{
                    "unknown":
                    {
                        "basis":"Pch1",
                        "name":"V",
                        "symbol":"V"
                    }
                }
            },
            "models":[{
                "name":"electric_Conductor",
                "materials":"Conductor",
                "setup":{
                    "coefficients":{
                        "c":"sigma:sigma",
                        "gamma":"{sigma*magnetic_dA_dt_0,sigma*magnetic_dA_dt_1,sigma*magnetic_dA_dt_2}:sigma:magnetic_dA_dt_0:magnetic_dA_dt_1:magnetic_dA_dt_2"
                    }
                }
            }]
        },
        "constraint":{
            "setup":{
                "unknown":
                {
                    "basis":"Pch1",
                    "name":"lm",
                    "symbol":"p"
                },
                "coefficients":{
                    "gamma":"{magnetic_A_0,magnetic_A_1,magnetic_A_2}:magnetic_A_0:magnetic_A_1:magnetic_A_2"
                }
            }
        }
    },
    "Parameters":
    {
        "V0":0,
        "V1":"1/4*(t/(0.1*10)*(t<(0.1*10))+((t<(0.5*40))+0*(t>(0.5*40)))*(t>(0.1*10))):t",
        "sigma":58e6,
        "mu":"4*pi*1e-7"
    },
    "Meshes":
    {
        "cfpdes":
        {
            "Import":
            {
                "filename":"$cfgdir/1torus-3d.geo"
            }
        }
    },
    "Materials":
    {
        "Conductor":
        {
            "markers":"Conductor"            
        },
        "Air":
        {
            "markers":"Air"
        }
    },
    "BoundaryConditions":
    {
        "magnetic":
        {
            "Dirichlet":
            {
                "boundary":
                {
                    "markers":["Infty"],
                    "expr":"{0,0,0}"
                },
                "mydir_x":
                {
                    "markers":["V0","OXOZ"],
                    "expr":"{0,0,0}"
                },
            
                "mydir_y":
                {
                    "markers":["V1","OYOZ"],
                    "expr":"{0,0,0}"
                },
                "mydir_z":
                {
                    "markers":["V0","OXOZ","V1","OYOZ"],
                    "expr":"{0,0,0}"
                }
            }
        },
        "constraint":
        {
            "Dirichlet":
            {
                "boundary":
                {
                    "markers":["Infty"],
                    "expr":"0"
                },
                "mydir_x":
                {
                    "markers":["V0","OXOZ"],
                    "expr":"0"
                },
            
                "mydir_y":
                {
                    "markers":["V1","OYOZ"],
                    "expr":"0"
                },
                "mydir_z":
                {
                    "markers":["V0","OXOZ","V1","OYOZ"],
                    "expr":"0"
                }
            }
        },
        "electric":
        {
            "Dirichlet":
            {
                "V0": 
                {
                    "markers":["V0"],
                    "expr":"V0:V0"
                },
                "V1":
                {
                    "markers":["V1"],
                    "expr":"V1:V1"
                }
            }
        }
    },
    "PostProcess":
    {
        "use-model-name":1,
        "cfpdes":
        {
            "Exports":
            {
                "fields":["magnetic.A","constraint.lm","electric.V","pid"],
                "expr": 
                {
                    "div_A":
                    {
                        "expr":"magnetic_grad_A_00+magnetic_grad_A_11+magnetic_grad_A_22:magnetic_grad_A_00:magnetic_grad_A_11:magnetic_grad_A_22"
                    },
                    "B":
                    {
                        "expr":"{magnetic_curl_A_0,magnetic_curl_A_1,magnetic_curl_A_2}:magnetic_curl_A_0:magnetic_curl_A_1:magnetic_curl_A_2"
                    },
                    "E":
                    {
                        "expr":"{-electric_grad_V_0-magnetic_dA_dt_0,-electric_grad_V_1-magnetic_dA_dt_1,-electric_grad_V_2-magnetic_dA_dt_2}:electric_grad_V_0:electric_grad_V_1:electric_grad_V_2:magnetic_dA_dt_0:magnetic_dA_dt_1:magnetic_dA_dt_2",
                        "markers":"Conductor"
                    },
                    "J":
                    {
                        "expr":"{-sigma*(electric_grad_V_0+magnetic_dA_dt_0), -sigma*(electric_grad_V_1+magnetic_dA_dt_1), -sigma*(electric_grad_V_2+magnetic_dA_dt_2)}:sigma:electric_grad_V_0:electric_grad_V_1:electric_grad_V_2:magnetic_dA_dt_0:magnetic_dA_dt_1:magnetic_dA_dt_2",
                        "markers":"Conductor"
                    }
                }
            }
        },
        "magnetic": 
        {
            "Measures": 
            {
                "Statistics":
                {
                    "%1_1%":
                    {
                        "type":"integrate",
                        "expr":"-%1_3%*sigma*(electric_grad_V_0*nx+electric_grad_V_1*nx+electric_grad_V_2*nz):sigma:electric_grad_V_0:electric_grad_V_1:electric_grad_V_2:nx:ny:nz",
                        "markers":"%1_2%",
                        "index1":
                        [
                            ["Ic_V0", "V0","(-1)"],
                            ["Ic_V1", "V1","(+1)"]
                        ]
                    },
                    "%1_1%":
                    {
                        "type":"integrate",
                        "expr":"-%1_3%*sigma*((electric_grad_V_0+magnetic_dA_dt_0)*nx+(electric_grad_V_1+magnetic_dA_dt_1)*ny+(electric_grad_V_2+magnetic_dA_dt_2)*nz):sigma:electric_grad_V_0:electric_grad_V_1:electric_grad_V_2:magnetic_dA_dt_0:magnetic_dA_dt_1:magnetic_dA_dt_2:nx:ny:nz",
                        "markers":"%1_2%",
                        "index1":
                        [
                            ["I_V0", "V0","(-1)"],
                            ["I_V1", "V1","(+1)"]
                        ]
                    },
                    "%1_1%":
                    {
                        "type":"integrate",
                        "expr":"sigma*((electric_grad_V_0+magnetic_dA_dt_0)*(electric_grad_V_0+magnetic_dA_dt_0)+(electric_grad_V_1+magnetic_dA_dt_1)*(electric_grad_V_1+magnetic_dA_dt_1)+(electric_grad_V_2+magnetic_dA_dt_2)*(electric_grad_V_2+magnetic_dA_dt_2)):sigma:electric_grad_V_0:electric_grad_V_1:electric_grad_V_2:magnetic_dA_dt_0:magnetic_dA_dt_1:magnetic_dA_dt_2",
                        "markers":"%1_2%",
                        "index1":
                        [
                            ["Power_V0", "V0"],
                            ["Power_V1", "V1"]
                        ]
                    },
                    "%1_1%":
                    {
                        "type":"integrate",
                        "expr":"-sigma*(magnetic_A_0*(electric_grad_V_0+magnetic_dA_dt_0)+magnetic_A_1*(electric_grad_V_1+magnetic_dA_dt_1)+magnetic_A_2*(electric_grad_V_2+magnetic_dA_dt_2)):sigma:magnetic_dA_dt_2:magnetic_A_0:magnetic_A_1:magnetic_A_2:electric_grad_V_0:electric_grad_V_1:electric_grad_V_2:magnetic_dA_dt_0:magnetic_dA_dt_1",
                        "markers":"%1_2%",
                        "index1":
                        [
                            ["MagneticEnergy_V0", "V0"],
                            ["MagneticEnergy_V1", "V1"]
                        ]
                    },
                    "Resistance":
                    {
                        "type":"integrate",
                        "expr":"1/sigma:sigma",
                        "markers":["Conductor"]
                    }
                },
                "Points":
                {
                    "check_P0":
                    {
                        "coord":"{0.061942,0.061942,0.}",   // correspond to r=0.0876, z=0
                        "fields":"A"
                    },
                    "check_P1":
                    {
                        "coord":"{0.,0.,0.}",   // correspond to r=0.0876, z=0
                        "fields":"A",
                        "expressions": 
                        {
                            "B":"{magnetic_curl_A_0,magnetic_curl_A_1,magnetic_curl_A_2}:magnetic_curl_A_0:magnetic_curl_A_1:magnetic_curl_A_2"
                        }
                    },
                    "Or": 
                    {
                        "over_geometry": 
                        {
                            "segment": 
                            {
                                "point1":"{0,0,0}", 
                                "point2":"{0.7214,0,0}", 
                                "n_points":100 
                            }
                        },
                        "fields":"A", 
                        "expressions": 
                        {
                            "B":"{magnetic_curl_A_0,magnetic_curl_A_1,magnetic_curl_A_2}:magnetic_curl_A_0:magnetic_curl_A_1:magnetic_curl_A_2"
                        },
                        "include_coordinates":1, 
                        "output": 
                        {
                            "type":"table" 
                        }
                    },
                    "Oz": 
                    {
                        "over_geometry": 
                        {
                            "segment": 
                            {
                                "point1":"{0,0,-0.7214}", 
                                "point2":"{0,0,0.7214}", 
                                "n_points":100 
                            }
                        },
                        "fields":"A", 
                        "expressions": 
                        {
                            "B":"{magnetic_curl_A_0,magnetic_curl_A_1,magnetic_curl_A_2}:magnetic_curl_A_0:magnetic_curl_A_1:magnetic_curl_A_2"
                        },
                        "include_coordinates":1, 
                        "output": 
                        {
                            "type":"table" 
                        }
                    }
                }
            }/*,
            "Checkers":
            {
                "Measures": 
                {
                    "Points_check_P0_field_A_0":
                    {
                        "value":"0.037578917278372016",    // the exact value come from python3/Bmap.py
                        "tolerance":1e-3
                    },
                    "Points_check_P0_field_A_1":
                    {
                        "value":"-0.03757891727837201",    // the exact value come from python3/Bmap.py
                        "tolerance":1e-3
                    },
                    "Points_check_P0_field_A_2":
                    {
                        "value":0,                        // the exact value come from python3/Bmap.py
                        "tolerance":1e-3
                    },
                    "Points_check_P1_expr_B_2":
                    {
                        "value":-0.9334267136032749,                        // the exact value come from python3/Bmap.py
                        "tolerance":1e-3
                    }
                }
            }*/
        }
    }
}